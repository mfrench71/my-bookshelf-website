---
layout: base.njk
title: Settings
scripts: '<script type="module" src="/js/settings.js"></script>'
---
<!-- Sub-navigation -->
<div class="bg-white border-b border-gray-200">
  <div class="max-w-6xl mx-auto px-4 py-2 flex items-center justify-between">
    <a href="/books/" class="p-1 -ml-1 hover:bg-gray-100 rounded-lg flex items-center gap-2 text-gray-600">
      <i data-lucide="arrow-left" class="w-4 h-4"></i>
      <span class="text-sm">Back to Books</span>
    </a>
  </div>
</div>

<main class="max-w-6xl mx-auto px-4 py-6">
  <h1 class="text-2xl font-bold text-gray-900 mb-6">Settings</h1>

  <div class="flex flex-col md:flex-row gap-6">
    <!-- Left Navigation -->
    <nav class="md:w-48 flex-shrink-0">
      <div class="flex md:flex-col gap-2 overflow-x-auto md:overflow-visible pb-2 md:pb-0">
        <button data-section="genres" class="settings-nav-btn active flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap text-left">
          <i data-lucide="tags" class="w-4 h-4"></i>
          <span>Manage Genres</span>
        </button>
        <button data-section="export" class="settings-nav-btn flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap text-left">
          <i data-lucide="download" class="w-4 h-4"></i>
          <span>Export Books</span>
        </button>
      </div>
    </nav>

    <!-- Content Area -->
    <div class="flex-1 min-w-0">
      <!-- Genres Section -->
      <section id="genres-section" class="settings-section">
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-lg font-semibold text-gray-900">Manage Genres</h2>
          <button id="add-genre-btn" class="flex items-center gap-2 px-3 py-1.5 bg-primary hover:bg-primary-dark text-white text-sm rounded-lg transition-colors">
            <i data-lucide="plus" class="w-4 h-4"></i>
            <span>Add</span>
          </button>
        </div>

        <!-- Loading State -->
        <div id="genres-loading" class="py-8 text-center">
          <div class="animate-spin w-6 h-6 border-2 border-primary border-t-transparent rounded-full mx-auto"></div>
          <p class="text-gray-500 text-sm mt-2">Loading genres...</p>
        </div>

        <!-- Empty State -->
        <div id="genres-empty" class="hidden py-8 text-center bg-gray-50 rounded-xl">
          <i data-lucide="tags" class="w-12 h-12 text-gray-300 mx-auto"></i>
          <h3 class="text-base font-medium text-gray-600 mt-3">No genres yet</h3>
          <p class="text-gray-400 text-sm mt-1">Create your first genre to organize books</p>
        </div>

        <!-- Genre List -->
        <div id="genre-list" class="space-y-2"></div>
      </section>

      <!-- Export Section -->
      <section id="export-section" class="settings-section hidden">
        <h2 class="text-lg font-semibold text-gray-900 mb-4">Export Books</h2>
        <div class="bg-gray-50 rounded-xl p-6">
          <p class="text-gray-600 mb-4">Download all your books as a JSON file. This backup includes titles, authors, ratings, notes, and genres.</p>
          <button id="export-btn" class="flex items-center gap-2 px-4 py-2 bg-primary hover:bg-primary-dark text-white rounded-lg transition-colors">
            <i data-lucide="download" class="w-4 h-4"></i>
            <span>Download Backup</span>
          </button>
        </div>
      </section>
    </div>
  </div>
</main>

<!-- Create/Edit Genre Modal -->
<div id="genre-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-xl w-full max-w-md p-6">
    <h3 id="modal-title" class="text-lg font-semibold mb-4">Add Genre</h3>
    <form id="genre-form" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
        <input type="text" id="genre-name" required placeholder="e.g., Science Fiction"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Color</label>
        <div id="color-picker" class="flex flex-wrap gap-2"></div>
      </div>
      <div class="flex gap-3 pt-2">
        <button type="button" id="cancel-genre" class="flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50">
          Cancel
        </button>
        <button type="submit" id="save-genre" class="flex-1 py-2 px-4 bg-primary text-white rounded-lg hover:bg-primary-dark">
          Save
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="delete-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-xl w-full max-w-sm p-6">
    <h3 class="text-lg font-semibold mb-2">Delete Genre?</h3>
    <p id="delete-message" class="text-gray-500 mb-6">This will remove the genre from all books.</p>
    <div class="flex gap-3">
      <button id="cancel-delete" class="flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50">
        Cancel
      </button>
      <button id="confirm-delete" class="flex-1 py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700">
        Delete
      </button>
    </div>
  </div>
</div>

<!-- Toast -->
<div id="toast" class="hidden fixed bottom-6 left-4 right-4 sm:left-auto sm:right-4 sm:w-80 bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg z-50"></div>
