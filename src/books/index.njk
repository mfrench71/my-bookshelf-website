---
layout: base.njk
title: My Books
scripts: '<script type="module" src="/js/books/index.js"></script>'
---
<!-- Sort & Filter Controls -->
<div class="bg-white border-b border-gray-200 sticky top-14 z-30">
  <div class="max-w-6xl mx-auto px-4 py-3">
    <div class="flex flex-col gap-2 md:flex-row md:items-center md:gap-3">
      <!-- Sort -->
      <div class="relative flex-1 md:flex-none md:w-48">
        <select id="sort-select"
          class="w-full appearance-none bg-white border border-gray-200 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary focus:border-primary outline-none cursor-pointer">
          <option value="createdAt-desc">Date Added (Newest)</option>
          <option value="createdAt-asc">Date Added (Oldest)</option>
          <option value="title-asc">Title (A-Z)</option>
          <option value="title-desc">Title (Z-A)</option>
          <option value="author-asc">Author (A-Z)</option>
          <option value="author-desc">Author (Z-A)</option>
          <option value="rating-desc">Rating (High-Low)</option>
          <option value="rating-asc">Rating (Low-High)</option>
        </select>
        <i data-lucide="chevron-down" class="absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
      </div>
      <!-- Filters -->
      <div class="flex items-center gap-2 flex-1 md:flex-none">
        <div class="relative flex-1 md:flex-none">
          <select id="rating-filter"
            class="w-full appearance-none bg-white border border-gray-200 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary focus:border-primary outline-none cursor-pointer">
            <option value="0">All Ratings</option>
            <option value="5">5 Stars</option>
            <option value="4">4+ Stars</option>
            <option value="3">3+ Stars</option>
            <option value="2">2+ Stars</option>
            <option value="1">1+ Stars</option>
          </select>
          <i data-lucide="chevron-down" class="absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
        </div>
        <div class="relative flex-1 md:flex-none">
          <select id="genre-filter"
            class="w-full appearance-none bg-white border border-gray-200 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary focus:border-primary outline-none cursor-pointer">
            <option value="">All Genres</option>
          </select>
          <i data-lucide="chevron-down" class="absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
        </div>
        <div class="relative flex-1 md:flex-none">
          <select id="status-filter"
            class="w-full appearance-none bg-white border border-gray-200 rounded-lg px-3 py-2 pr-8 text-sm focus:ring-2 focus:ring-primary focus:border-primary outline-none cursor-pointer">
            <option value="">All Status</option>
            <option value="reading">Reading</option>
            <option value="finished">Finished</option>
          </select>
          <i data-lucide="chevron-down" class="absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
        </div>
      </div>
      <!-- Reset Filters -->
      <button id="reset-filters" class="hidden p-2 hover:bg-gray-100 rounded-lg text-gray-500" title="Reset filters">
        <i data-lucide="x" class="w-5 h-5"></i>
      </button>
    </div>
  </div>
</div>

<!-- Pull to Refresh Indicator -->
<div id="pull-indicator" class="hidden overflow-hidden transition-all duration-200">
  <div class="flex items-center justify-center py-3 text-gray-500">
    <i id="pull-icon" data-lucide="arrow-down" class="w-5 h-5 mr-2 transition-transform"></i>
    <span id="pull-text">Pull to refresh</span>
  </div>
</div>

<!-- Main Content -->
<main id="main-content" class="max-w-6xl mx-auto px-4 py-4 pb-24">
  <!-- Loading State -->
  <div id="loading-state" class="py-12 text-center">
    <div class="animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"></div>
    <p class="text-gray-500 mt-3">Loading your books...</p>
  </div>

  <!-- Empty State (no books in library) -->
  <div id="empty-state" class="hidden py-12 text-center">
    <i data-lucide="book-open" class="w-16 h-16 text-gray-300 mx-auto"></i>
    <h3 class="text-lg font-medium text-gray-600 mt-4">No books yet</h3>
    <p class="text-gray-400 mt-1">Tap the + button to add your first book</p>
  </div>

  <!-- No Results State (filters active, no matches) -->
  <div id="no-results-state" class="hidden py-12 text-center">
    <i data-lucide="search-x" class="w-16 h-16 text-gray-300 mx-auto"></i>
    <h3 id="no-results-title" class="text-lg font-medium text-gray-600 mt-4">No books match your filters</h3>
    <p class="text-gray-400 mt-1">Try adjusting your filters or <button id="clear-filters-link" class="text-primary hover:underline">clear all filters</button></p>
  </div>

  <!-- Book List -->
  <div id="book-list" class="space-y-3"></div>
</main>

<!-- FAB - Add Book -->
<a href="/books/add/"
  class="fixed bottom-6 right-6 w-14 h-14 bg-primary hover:bg-primary-dark text-white rounded-full shadow-lg flex items-center justify-center transition-colors z-30">
  <i data-lucide="plus" class="w-6 h-6"></i>
</a>

<!-- Toast -->
<div id="toast" class="hidden fixed bottom-20 left-4 right-4 sm:left-auto sm:right-4 sm:w-80 bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg z-50"></div>
