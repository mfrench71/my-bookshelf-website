---
layout: base.njk
title: Book Details
scripts: '<script type="module" src="/js/book-detail.js"></script>'
---
<!-- Sub-navigation -->
<div class="bg-white border-b border-gray-200 sticky top-14 z-30">
  <div class="max-w-6xl mx-auto px-4 py-2 flex items-center justify-between">
    <a href="/books/" class="p-1 -ml-1 hover:bg-gray-100 rounded-lg flex items-center gap-2 text-gray-600">
      <i data-lucide="arrow-left" class="w-4 h-4"></i>
      <span class="text-sm">Back to Books</span>
    </a>
    <div class="flex items-center gap-2">
      <button id="refresh-data-btn" class="p-1 hover:bg-gray-100 rounded-lg text-gray-600 flex items-center gap-1" title="Refresh from API">
        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
        <span class="text-sm">Refresh Data</span>
      </button>
      <button id="delete-btn" class="p-1 hover:bg-red-50 rounded-lg text-red-600 flex items-center gap-1" title="Delete">
        <i data-lucide="trash-2" class="w-4 h-4"></i>
        <span class="text-sm">Delete</span>
      </button>
    </div>
  </div>
</div>

<!-- Loading -->
<div id="loading" class="max-w-6xl mx-auto px-4 py-12 text-center">
  <div class="animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto"></div>
  <p class="text-gray-500 mt-3">Loading...</p>
</div>

<!-- Book Content -->
<main id="content" class="hidden max-w-6xl mx-auto px-4 py-6">
  <div class="flex flex-col md:flex-row md:gap-8">
    <!-- Left Column: Book Info (mobile: full width, desktop: sticky sidebar) -->
    <div class="md:w-72 flex-shrink-0 mb-6 md:mb-0 md:sticky md:top-[8rem] md:self-start">
      <!-- Cover -->
      <div class="flex justify-center md:justify-start mb-4">
        <div id="cover-container"></div>
      </div>

      <!-- Info -->
      <div class="text-center md:text-left mb-4">
        <h2 id="book-title" class="text-2xl font-bold text-gray-900"></h2>
        <p id="book-author" class="text-gray-500 mt-1"></p>
        <p id="book-isbn" class="text-gray-400 text-sm mt-1"></p>
      </div>

      <!-- Rating Display -->
      <div class="flex justify-center md:justify-start items-center mb-3">
        <div id="book-rating" class="rating-stars"></div>
      </div>

      <!-- Dates -->
      <div id="book-dates" class="text-center md:text-left text-sm text-gray-400 mb-4"></div>

      <!-- Book Details -->
      <div id="book-details" class="text-center md:text-left text-sm text-gray-500 space-y-1"></div>
    </div>

    <!-- Right Column: Edit Form -->
    <div class="flex-1">
      <form id="edit-form" class="bg-white rounded-xl border border-gray-200 p-4 space-y-4">
        <div>
          <label class="block font-semibold text-gray-700 mb-1">Title</label>
          <input type="text" id="title" required
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
        </div>

        <div>
          <label class="block font-semibold text-gray-700 mb-1">Author</label>
          <input type="text" id="author" required
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
        </div>

        <div>
          <label class="block font-semibold text-gray-700 mb-1">Cover Image URL</label>
          <input type="url" id="cover-url" readonly
            class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed outline-none">
        </div>

        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block font-semibold text-gray-700 mb-1">Publisher</label>
            <input type="text" id="publisher"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
          </div>
          <div>
            <label class="block font-semibold text-gray-700 mb-1">Published Date</label>
            <input type="text" id="published-date"
              class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
          </div>
        </div>

        <div>
          <label class="block font-semibold text-gray-700 mb-1">Format</label>
          <input type="text" id="physical-format" placeholder="e.g., Hardcover, Paperback"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none">
        </div>

        <div>
          <label class="block font-semibold text-gray-700 mb-2">Rating</label>
          <div id="rating-input" class="flex gap-1">
            <button type="button" class="star-btn p-1" data-rating="1"><i data-lucide="star" class="w-5 h-5"></i></button>
            <button type="button" class="star-btn p-1" data-rating="2"><i data-lucide="star" class="w-5 h-5"></i></button>
            <button type="button" class="star-btn p-1" data-rating="3"><i data-lucide="star" class="w-5 h-5"></i></button>
            <button type="button" class="star-btn p-1" data-rating="4"><i data-lucide="star" class="w-5 h-5"></i></button>
            <button type="button" class="star-btn p-1" data-rating="5"><i data-lucide="star" class="w-5 h-5"></i></button>
          </div>
        </div>

        <div id="genre-picker-container"></div>

        <div>
          <label class="block font-semibold text-gray-700 mb-1">Notes</label>
          <textarea id="notes" rows="3"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none resize-none"></textarea>
        </div>

        <button type="submit" id="save-btn"
          class="w-full bg-primary hover:bg-primary-dark text-white font-medium py-3 px-4 rounded-lg transition-colors">
          Save Changes
        </button>
      </form>
    </div>
  </div>
</main>

<!-- Delete Confirmation Modal -->
<div id="delete-modal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-xl w-full max-w-sm p-6">
    <h3 class="text-lg font-semibold mb-2">Delete Book?</h3>
    <p class="text-gray-500 mb-6">This action cannot be undone.</p>
    <div class="flex gap-3">
      <button id="cancel-delete" class="flex-1 py-2 px-4 border border-gray-300 rounded-lg hover:bg-gray-50">
        Cancel
      </button>
      <button id="confirm-delete" class="flex-1 py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700">
        Delete
      </button>
    </div>
  </div>
</div>

<!-- Toast -->
<div id="toast" class="hidden fixed bottom-6 left-4 right-4 sm:left-auto sm:right-4 sm:w-80 bg-gray-800 text-white px-4 py-3 rounded-lg shadow-lg z-50"></div>
